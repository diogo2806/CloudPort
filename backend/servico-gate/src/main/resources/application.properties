server.port=${GATE_SERVER_PORT:8082}

spring.application.name=servico-gate

spring.datasource.url=${GATE_DB_URL:jdbc:postgresql://localhost:5432/servico_gate}
spring.datasource.username=${GATE_DB_USERNAME:postgres}
spring.datasource.password=${GATE_DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=none
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

spring.rabbitmq.host=${GATE_RABBIT_HOST:localhost}
spring.rabbitmq.port=${GATE_RABBIT_PORT:5672}
spring.rabbitmq.username=${GATE_RABBIT_USERNAME:guest}
spring.rabbitmq.password=${GATE_RABBIT_PASSWORD:guest}

management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.probes.enabled=true
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Configurações de integração com o TOS
cloudport.tos.api.base-url=${TOS_API_BASE_URL:http://localhost:8080}
cloudport.tos.api.timeout=${TOS_API_TIMEOUT_MS:5000}

# Configurações de armazenamento de documentos
cloudport.document-storage.provider=${DOCUMENT_STORAGE_PROVIDER:local}
cloudport.document-storage.base-path=${DOCUMENT_STORAGE_BASE_PATH:/var/lib/cloudport/documents}
cloudport.document-storage.bucket=${DOCUMENT_STORAGE_BUCKET:cloudport-documents}

# Resilience4j
resilience4j.circuitbreaker.instances.tosApi.register-health-indicator=true
resilience4j.circuitbreaker.instances.tosApi.sliding-window-size=${RESILIENCE4J_TOS_WINDOW_SIZE:10}
resilience4j.circuitbreaker.instances.tosApi.failure-rate-threshold=${RESILIENCE4J_TOS_FAILURE_THRESHOLD:50}
resilience4j.circuitbreaker.instances.tosApi.wait-duration-in-open-state=${RESILIENCE4J_TOS_WAIT_DURATION:PT30S}
